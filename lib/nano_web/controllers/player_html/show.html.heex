<div
  class="text-dark [border-radius:2rem] flex justify-center gap-16 min-h-screen p-16"
  style="background: var(--yellow-normal);"
>
  <!-- Video Player Section -->
  <div id="video-wrapper" class="flex-2/3 flex flex-col h-full w-full rounded-2xl px-8">
    <div class="flex-none overflow-hidden aspect-video">
      <video
        id="video-player"
        controls
        class="w-full h-full object-cover rounded-2xl border-2 border-[var(--blue-dark-active)] bg-white"
      >
      </video>
      <script>
        var video = document.getElementById('video-player');
        if (Hls.isSupported()) {
          var hls = new Hls({
            debug: false,
            enableWorker: true,
            lowLatencyMode: true,
            backBufferLength: 90
          });
          hls.loadSource('https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8');
          hls.attachMedia(video);
          hls.on(Hls.Events.MEDIA_ATTACHED, function () {
            video.muted = true;
            video.play().catch(function(error) {
              console.log("Playback failed:", error);
            });
          });
        }
        else if (video.canPlayType('application/vnd.apple.mpegurl')) {
          video.src = 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8';
          video.addEventListener('canplay', function () {
            video.play().catch(function(error) {
              console.log("Playback failed:", error);
            });
          });
        }
      </script>
    </div>
    
<!-- Program Questions Section -->
    <div class="flex-1 mt-4 overflow-y-auto">
      {live_render(@conn, NanoWeb.ProgramQuestionLive,
        session: %{"room_id" => @video_room.id},
        id: "program-questions"
      )}
    </div>
  </div>
  
<!-- Chat Section -->
  <div id="chat-wrapper" class="flex-1/3 relative min-w-96">
    <div class="flex justify-end p-4 pt-0">
      <.link class="text-white" href={~p"/rooms"}><.icon name="hero-home" /></.link>
    </div>

    {live_render(@conn, NanoWeb.ChatLive,
      session: %{
        "room_id" => @video_room.id,
        "user_token" => @user_token
      }
    )}
  </div>
</div>
